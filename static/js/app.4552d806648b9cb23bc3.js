webpackJsonp([1],{0:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("VCXJ"),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){e.go("/")}}},[e._v("首页 ")]),e._v(" "),a("el-menu-item",{attrs:{index:"1"},on:{click:function(t){e.go("/house_charts")}}},[e._v("房价趋势")]),e._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:function(t){e.go("/house_search")}}},[e._v("房源搜索")])],1),e._v(" "),a("router-view")],1)},staticRenderFns:[]},n=a("OF7X")({name:"app",data:function(){return{theme1:"dark"}},methods:{go:function(e){this.$router.push({path:e})}}},l,!1,function(e){a("OI02")},null,null).exports,o=a("zO6J"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hello"},[t("h1",[this._v(this._s(this.msg))])])},staticRenderFns:[]},c=a("OF7X")({name:"HelloWorld",data:function(){return{msg:"欢迎来到链家二手房分析平台"}}},i,!1,function(e){a("UU1Z")},"data-v-621c73b2",null).exports,s=a("3cXf"),u=a.n(s),p={name:"house_charts",data:function(){return{chartData:[],dataPre:{},scale:[],height:400,style:{stroke:"#fff",lineWidth:1},form:{price_type:"price",data_type:"avg",date_range:"",area:[]},area_items:[],pickerOptions1:{disabledDate:function(e){return e.getTime()>Date.now()&&e.getTime()<Date.parse("2017-11-27")}}}},mounted:function(){this.get_area_data()},methods:{get_area_data:function(){var e=this;this.$http.get("/api/get_area").then(function(t){e.area_items=t.data.items})},get_area_agg:function(){var e=this,t=u()(this.form);this.$http.post("/api/get_area_agg",t).then(function(t){if(t.data.total>0){var a=new Array([]);e.chartData=t.data.items;for(var r in t.data.items[0])"crawl_date"!==r&&a.push(r);a.shift(),e.dataPre={transform:{type:"fold",fields:a,key:"city",value:"price"}},e.scale=[{dataKey:"crawl_date",max:1}]}})},clear_data:function(){this.form.price_type="price",this.form.date_range="",this.form.area=[]}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"价格类型"}},[a("el-radio-group",{model:{value:e.form.price_type,callback:function(t){e.$set(e.form,"price_type",t)},expression:"form.price_type"}},[a("el-radio",{attrs:{value:"单价",label:"price"}},[e._v("单价")]),e._v(" "),a("el-radio",{attrs:{value:"总价",label:"total-price"}},[e._v("总价")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"数据类型"}},[a("el-radio-group",{model:{value:e.form.data_type,callback:function(t){e.$set(e.form,"data_type",t)},expression:"form.data_type"}},[a("el-radio",{attrs:{value:"单价",label:"avg"}},[e._v("均值")]),e._v(" "),a("el-radio",{attrs:{value:"总价",label:"sum"}},[e._v("总值")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间范围"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions1},model:{value:e.form.date_range,callback:function(t){e.$set(e.form,"date_range",t)},expression:"form.date_range"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所在区域"}},[a("el-checkbox-group",{model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}},e._l(e.area_items,function(t){return a("el-checkbox",{key:t.area,attrs:{label:t.area,name:"area.area"}},[e._v(e._s(t.area))])}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.get_area_agg}},[e._v("提交查询")]),e._v(" "),a("el-button",{on:{click:e.clear_data}},[e._v("清空数据")])],1)],1),e._v(" "),a("v-chart",{attrs:{"force-fit":!0,height:e.height,data:e.chartData,dataPre:e.dataPre,scale:e.scale}},[a("v-tooltip"),e._v(" "),a("v-axis"),e._v(" "),a("v-legend"),e._v(" "),a("v-line",{attrs:{position:"crawl_date*price",color:"city"}}),e._v(" "),a("v-point",{attrs:{position:"crawl_date*price",color:"city",size:4,"v-style":e.style}})],1)],1)},staticRenderFns:[]},_=a("OF7X")(p,d,!1,null,null,null).exports,h={name:"house_search",data:function(){return{restaurants:[],area:"",areas:[],search_count:0,timeout:null,table_columns:{prop_title:"属性标题",prop_tag:"标签",total_price:"总价",house_type:"房子类型",area:"面积/平方米",floor_area:"楼层区域",floor_count:"楼层数",direction:"朝向",price:"单价",position:"小区名",area_name:"区域",build_date:"建造时间",deal_type:"交易状态"},tableData:[],current_page:1,crawl_date:"",pickerOptions1:{disabledDate:function(e){return e.getTime()>Date.now()}}}},mounted:function(){this.restaurants=this.loadAll()},methods:{loadAll:function(){return[{value:"三全鲜食（北新泾店）",address:"长宁区新渔路144号"},{value:"Hot honey 首尔炸鸡（仙霞路）",address:"上海市长宁区淞虹路661号"}]},queryAreaFunc:function(){var e=this,t=u()({area:this.area,page:1,limit:10});this.$http.post("/api/area/get_search_result",t).then(function(t){e.tableData=t.data.items,e.search_count=t.data.total,e.current_page=1})},page_change:function(e){var t=this,a=u()({area:this.area,page:e,limit:10});this.$http.post("/api/area/get_search_result",a).then(function(a){t.tableData=a.data.items,t.search_count=a.data.total,t.current_page=e})},querySearchAsync:function(e,t){var a=this;if(""!=this.area){var r=u()({area:this.area});this.$http.post("/api/area/get_search_result",r).then(function(e){var r=e.data.items.map(function(e){return{value:e.position}});console.log(r),clearTimeout(a.timeout),a.timeout=setTimeout(function(){t(r)},3e3*Math.random())})}},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){console.log(e)}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择数据抓取的日期","picker-options":e.pickerOptions1},model:{value:e.crawl_date,callback:function(t){e.crawl_date=t},expression:"crawl_date"}}),e._v(" "),a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入要搜索的小区名字"},on:{select:e.handleSelect},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}}),e._v(" "),a("el-button",{on:{click:e.queryAreaFunc}},[e._v("搜索一下")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"position",label:"小区名",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area_name",label:"区域",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"area",label:"面积/平方米",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"price",label:"单价",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"total_price",label:"总价",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"floor_area",label:"楼层区域",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"floor_count",label:"楼层数",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"prop_title",label:"特色",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"house_type",label:"房子类型",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"direction",label:"朝向",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom",prop:"build_date",label:"建造时间",width:"180","header-align":"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deal_type",label:"交易状态",width:"180","header-align":"center"}})],1),e._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"}),e._v(" "),a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.search_count,"current-page":e.current_page},on:{"current-change":e.page_change}})],1)],1)},staticRenderFns:[]},f=a("OF7X")(h,m,!1,null,null,null).exports;r.default.use(o.a);var v=new o.a({routes:[{path:"/",name:"HelloWorld",component:c},{path:"/house_charts",name:"house_charts",component:_},{path:"/house_search",name:"house_search",component:f}]}),g=a("y0Fx"),b=a("Ay7c"),y=a("FDFR"),w=a.n(y);a("Uo1D");r.default.use(w.a),r.default.use(b.a),r.default.use(g.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:v,template:"<App/>",components:{App:n},render:function(e){return e(n)}})},OI02:function(e,t){},UU1Z:function(e,t){},Uo1D:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.4552d806648b9cb23bc3.js.map